jQuery(function($){if($().isotope===undefined){return}var custom_css="";$(".lvca-gallery-wrap").each(function(){var html_content=$(this).find(".js-isotope:first");html_content.imagesLoaded(function(){html_content.isotope("layout")});var container=$(this).find(".lvca-gallery:first");if(container.length===0){return}$(this).find(".lvca-taxonomy-filter .lvca-filter-item a").on("click",function(e){e.preventDefault();var selector=$(this).attr("data-value");container.isotope({filter:selector});$(this).closest(".lvca-taxonomy-filter").children().removeClass("lvca-active");$(this).closest(".lvca-filter-item").addClass("lvca-active");return false});$(this).find(".lvca-pagination a.lvca-page-nav").on("click",function(e){e.preventDefault();var $this=$(this),$parent=$this.closest(".lvca-gallery-wrap"),dataId=$parent.attr("data-dataId"),settings=window[dataId]["settings"],items=window[dataId]["items"],maxpages=window[dataId]["maxpages"],current=parseInt($parent.attr("data-current")),paged=$this.attr("data-page");if($this.is(".lvca-current-page")||$parent.is(".lvca-processing"))return;if(paged=="prev"){if(current<=1)return;paged=current-1}else if(paged=="next"){if(current>=maxpages)return;paged=current+1}$parent.addClass("lvca-processing");var data={action:"lvca_load_gallery_items",settings:settings,items:items,paged:paged};$.post(lvca_ajax_object.ajax_url,data,function(response){var $grid=$parent.find(".lvca-gallery:first");var $existing_items=$grid.children(".lvca-gallery-item");$grid.isotope("remove",$existing_items);var $response=$("<div></div>").html(response);$response.imagesLoaded(function(){var $new_items=$response.children(".lvca-gallery-item");$grid.isotope("insert",$new_items)});$parent.attr("data-current",paged);$this.siblings(".lvca-current-page").removeClass("lvca-current-page");$parent.find('.lvca-page-nav[data-page="'+parseInt(paged)+'"]').addClass("lvca-current-page");$parent.find('.lvca-page-nav[data-page="next"]').removeClass("lvca-disabled");$parent.find('.lvca-page-nav[data-page="prev"]').removeClass("lvca-disabled");if(paged<=1)$parent.find('.lvca-page-nav[data-page="prev"]').addClass("lvca-disabled");else if(paged>=maxpages)$parent.find('.lvca-page-nav[data-page="next"]').addClass("lvca-disabled");$parent.removeClass("lvca-processing")})});$(this).find(".lvca-pagination a.lvca-load-more").on("click",function(e){e.preventDefault();var $this=$(this),$parent=$this.closest(".lvca-gallery-wrap"),dataId=$parent.attr("data-dataId"),settings=window[dataId]["settings"],items=window[dataId]["items"],maxpages=window[dataId]["maxpages"],total=window[dataId]["total"],current=parseInt($parent.attr("data-current")),paged=$this.attr("data-page");if(current>=maxpages||$parent.is(".lvca-processing"))return;$parent.addClass("lvca-processing");paged=++current;var data={action:"lvca_load_gallery_items",settings:settings,items:items,paged:paged};$.post(lvca_ajax_object.ajax_url,data,function(response){var $grid=$parent.find(".lvca-gallery:first");var $response=$("<div></div>").html(response);$response.imagesLoaded(function(){var $new_items=$response.children(".lvca-gallery-item");$grid.isotope("insert",$new_items)});$parent.attr("data-current",current);if(settings["show_remaining"]){if(current==maxpages){$this.find("span").text(0)}else{var remaining=total-current*settings["items_per_page"];$this.find("span").text(remaining)}}if(current==maxpages)$this.addClass("lvca-disabled");$parent.removeClass("lvca-processing")})});$(this).magnificPopup({delegate:"a.lvca-lightbox-item",type:"image",showCloseBtn:true,gallery:{enabled:true},image:{titleSrc:"title"}});$(this).find(".lvca-gallery").magnificPopup({delegate:"a.lvca-video-lightbox",type:"iframe",showCloseBtn:true,gallery:{enabled:true},iframe:{titleSrc:"title"}});var dataId=$(this).attr("data-dataId"),settings=window[dataId]["settings"];var element_id=$(this).children(".lvca-gallery").eq(0).attr("id");var id_selector="#"+element_id;custom_css+=id_selector+".lvca-gallery { margin-left: -"+settings["gutter"]+"px; margin-right: -"+settings["gutter"]+"px; }";custom_css+="@media screen and (max-width: "+settings["tablet_width"]+"px) {";custom_css+=id_selector+".lvca-gallery { margin-left: -"+settings["tablet_gutter"]+"px; margin-right: -"+settings["tablet_gutter"]+"px; }";custom_css+="}";custom_css+="@media screen and (max-width: "+settings["mobile_width"]+"px) {";custom_css+=id_selector+".lvca-gallery { margin-left: -"+settings["mobile_gutter"]+"px; margin-right: -"+settings["mobile_gutter"]+"px; }";custom_css+="}";custom_css+=id_selector+".lvca-gallery .lvca-gallery-item { padding: "+settings["gutter"]+"px; }";custom_css+="@media screen and (max-width: "+settings["tablet_width"]+"px) {";custom_css+=id_selector+".lvca-gallery .lvca-gallery-item { padding: "+settings["tablet_gutter"]+"px; }";custom_css+="}";custom_css+="@media screen and (max-width: "+settings["mobile_width"]+"px) {";custom_css+=id_selector+".lvca-gallery .lvca-gallery-item { padding: "+settings["mobile_gutter"]+"px; }";custom_css+="}"});if(custom_css!==""){var inline_css='<style type="text/css">'+custom_css+"</style>";$("head").append(inline_css)}});