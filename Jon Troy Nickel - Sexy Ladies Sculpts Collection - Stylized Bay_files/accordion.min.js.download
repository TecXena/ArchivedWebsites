jQuery(function($){if($(".lvca-accordion").length){LVCA_Accordion_Mgr.init();$(".lvca-accordion").each(function(){var accordion=$(this);new LVCA_Accordion(accordion)})}});LVCA_Accordion_Mgr={init:function(){var self=this;self.initHash();self.initAnchor();jQuery(window).on("hashchange.lvca.accordion",function(){self.initHash()})},initAnchor:function(){var self=this;jQuery('a[href*="#"]').click(function(event){var hash=jQuery(this).attr("href").split("#").pop();if(""!==hash){var $element=jQuery("#"+hash);if($element.length>0){if($element.hasClass("lvca-panel")){event.preventDefault();self.displayPanel($element)}}}})},initHash:function(){var self=this;var hash,$element;hash=window.location.hash.replace("#","").split("/").shift();if(""!==hash){$element=jQuery("#"+hash);if($element.length>0){if($element.hasClass("lvca-panel")){setTimeout(function(){self.displayPanel($element)},100)}}}},displayPanel:function($panel){var self=this;var offset,speed;offset=.2;speed=300;if(!$panel.hasClass("lvca-active")){$panelLabel=$panel.find(".lvca-panel-title").eq(0);$panelLabel.trigger("click")}setTimeout(function(){jQuery("html, body").animate({scrollTop:$panel.offset().top-jQuery(window).height()*offset},speed)},300)}};var LVCA_Accordion=function(accordion){this.panels=accordion.find(".lvca-panel");this.toggle=false;this.expanded=false;if(accordion.data("toggle")==true)this.toggle=true;if(accordion.data("expanded")==true)this.expanded=true;this.current=null;this.initEvents()};LVCA_Accordion.prototype.show=function(panel){if(this.toggle){if(panel.hasClass("lvca-active")){this.close(panel)}else{this.open(panel)}}else{if(panel.hasClass("lvca-active")){this.close(panel);this.current=null}else{this.close(this.current);this.open(panel);this.current=panel}}};LVCA_Accordion.prototype.close=function(panel){if(panel!==null){panel.children(".lvca-panel-content").slideUp(300);panel.removeClass("lvca-active")}};LVCA_Accordion.prototype.open=function(panel){if(panel!==null){panel.children(".lvca-panel-content").slideDown(300);panel.addClass("lvca-active")}};LVCA_Accordion.prototype.initEvents=function(){var self=this;if(this.expanded&&this.toggle){this.panels.each(function(){var panel=jQuery(this);self.show(panel)})}this.panels.find(".lvca-panel-title").click(function(event){event.preventDefault();var $panel=jQuery(this).parent();if(!$panel.hasClass("lvca-active")){var target=$panel.attr("id");history.pushState?history.pushState(null,null,"#"+target):window.location.hash="#"+target}else{var target=$panel.attr("id");if(window.location.hash=="#"+target)history.pushState?history.pushState(null,null,"#"):window.location.hash="#"}self.show($panel)})};